{
    "version": "https://jsonfeed.org/version/1",
    "title": "Polaris",
    "subtitle": "Aki的日记本",
    "icon": "http://yoursite.com/child/images/favicon.ico",
    "description": "这里是Aki的个人日记本",
    "home_page_url": "http://yoursite.com/child",
    "items": [
        {
            "id": "http://yoursite.com/child/Aki-Blog-Info/",
            "url": "http://yoursite.com/child/Aki-Blog-Info/",
            "title": "个人博客搭建日志",
            "date_published": "2023-07-28T12:45:00.000Z",
            "content_html": "<div class=\"note info\">\n<p>这只是一个对 shoka 主题的拙略的修改</p>\n</div>\n<div class=\"note info\">\n<p>这里的分析是基于 shoka 主题进行了，对于其他的主题可能有一些问题，我也是第一次搞。</p>\n</div>\n<div class=\"note info\">\n<p>最近又忽然有了一个大想法，我 shoka 主题 都改了，连着 hexo 也改改把，目前先专心搞主题</p>\n</div>\n<p>其实一开始我是打算自己写一个的，已经完成了前端页面 (并没有)，和后台文件管理了，结果死在部署这一步了。</p>\n<p>忽然发现云服务器到期了，买的域名还有不到一个月到期，用 Termux 感觉有点慢，遂决定用 hexo 改一个，还省的自己写前端，原本打算用我自己的后台的，但是发现用内网穿透虽然是便宜很多，但是还是慢，所以就放到了 Github 和 Vercel 上。</p>\n<p>接下来将逐渐添加一些我想到的功能，同时在工作的时候写一些博客的内容。</p>\n<p><strong>主题的目录结构：</strong></p>\n<pre><code>shoka\n    ├─languages\n    ├─layout\n    │  ├─_alternate\n    │  ├─_macro\n    │  └─_partials\n    │      ├─head\n    │      ├─post\n    │      ├─sidebar\n    │      └─third-party\n    ├─scripts\n    │  ├─filters\n    │  ├─generaters\n    │  ├─helpers\n    │  ├─renderer\n    │  └─tags\n    └─source\n        ├─css\n        │  └─_common\n        │      ├─components\n        │      │  ├─highlight\n        │      │  ├─pages\n        │      │  ├─post\n        │      │  ├─tags\n        │      │  └─third-party\n        │      │      └─mermaid\n        │      ├─outline\n        │      │  ├─footer\n        │      │  ├─header\n        │      │  └─sidebar\n        │      └─scaffolding\n        ├─images\n        └─js\n            └─_app\n</code></pre>\n<p>hexo 启动时候的工作流程应该是，先读取并执行 scripts 中的所有脚本，然后读取 layout 中的模板，之后进行渲染，其中 <code>layout</code>  的入口应该是 <code>index.njk</code> 。</p>\n<p><code>Layout</code>  文件夹中 <code>_partials</code>  中文件的作用是将整个博客分割成了一个个小部分，方便复用。 <code>layout.njk</code>  是整体布局， <code>archive.njk</code>  到  <code>tag.njk</code>  这几个文件都是重写了 <code>layout.njk</code>  的 <code>block content</code>  这个区块。</p>\n<h2 id=\"开搞\"><a class=\"anchor\" href=\"#开搞\">#</a> 开搞</h2>\n<p>目前修改的中心是 <code>scripts</code>  中的 <code>helpers</code>  因为主要使用的一些工具函数就是在这里定义的</p>\n<h3 id=\"推荐文章-热门文章-最新评论热门评论\"><a class=\"anchor\" href=\"#推荐文章-热门文章-最新评论热门评论\">#</a> 推荐文章、热门文章、最新评论，热门评论</h3>\n<p>目前 shoka 主题只有底部的随机文章，但是我想要推荐一些文章，或者让其他看到什么文章浏览量最高。</p>\n<p>接下来以推荐文章为例</p>\n<p>我先在 <code>shoka-scripts-helpers</code>  中创建了一个新的 js 文件 <code>utils.js</code>  用来声明一些我想要添加上去的函数，如：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hexo<span class=\"token punctuation\">.</span>extend<span class=\"token punctuation\">.</span>helper<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">'recommended_article'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">let</span> posts <span class=\"token operator\">=</span> hexo<span class=\"token punctuation\">.</span>locals<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'posts'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  posts<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hexo<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>widgets<span class=\"token punctuation\">.</span>recommended_article<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      res<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">return</span> res</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>然后在 widgets 模板文件中添加对应的块，并且调用声明的函数即可。同时还给 css 添加了 <code>display: inline-block</code>  自动换行。</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"></span></pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL3poLWNuL2FwaS9oZWxwZXI=\">辅助函数（Helper） | Hexo</span></p>\n<p>我对这个的理解就是将原本要写在模板中的一些函数独立出来，声明成全局函数，可以在模板的任何地方调用（大概），这样就可以很方便的使用一些在模板页面中获取起来不是很方便的依赖或者变量，同时也将模板和过程进行了分离</p>\n<h3 id=\"音乐自建服务器\"><a class=\"anchor\" href=\"#音乐自建服务器\">#</a> 音乐自建服务器</h3>\n<p>因为 shoka 主题中的音乐播放器无法播放网易云的 vip 歌曲，所以我决定自建一个服务器端，稍稍修改一下😉</p>\n<h1 id=\"todo\"><a class=\"anchor\" href=\"#todo\">#</a> TODO</h1>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_0\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_0\"> 优化今日诗词请求，改为只在首页时请求</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_1\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_1\"> 添加天气</label>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_2\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_2\"> 天气好像没居中，样式好像不好看</label></li>\n</ul>\n</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_3\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_3\"> 添加推荐文章</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_4\" disabled=\"true\" /><label for=\"cbx_4\"> 整体迁移到 Termux 中</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_5\" disabled=\"true\" /><label for=\"cbx_5\"> 添加热门文章</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_6\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_6\"> 方角改成圆角</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_7\" disabled=\"true\" /><label for=\"cbx_7\"> 测试 Vercel 被墙的情况，看情况自行搭建服务器</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_8\" disabled=\"true\" /><label for=\"cbx_8\"> 开始尝试自行写一个评论组件</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_9\" disabled=\"true\" /><label for=\"cbx_9\"> 添加留言板块，计划使用 Vercel 不行用自己的服务器</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_10\" disabled=\"true\" /><label for=\"cbx_10\"> 测试音乐模块，看情况部署一个网易云 api 后端</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_11\" disabled=\"true\" /><label for=\"cbx_11\"> 看到一个人搞了一个订阅功能，开始思考这个做出来有没有用了</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_12\" disabled=\"true\" /><label for=\"cbx_12\"> 背景图加个粒子效果或者整个网格装饰一下，太大了有点不好看</label></li>\n</ul>\n",
            "tags": [
                "开发日记",
                "Hexo",
                "note"
            ]
        }
    ]
}